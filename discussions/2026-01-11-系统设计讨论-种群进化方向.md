# 系统设计讨论：从个体成长到种群进化

日期: 2026-01-11
参与者: Human, Claude

## 背景

讨论 Agent 进化系统的具体设计方向。

---

## 关键决定

### 1. 技术栈
- Vercel AI SDK
- DeepSeek 推理模型 (R1) + 非推理模型 (V3)
- CLI 作为起点

### 2. 角色分工
```
Claude = 系统监督者
├── 观察记录
├── 少干预
└── 设计选择压力

DeepSeek Agent = 被观察者
├── R1: 深度思考
├── V3: 快速执行
└── 积累经验、繁殖后代
```

### 3. 核心方向转变

**原思路**：一个 Agent 的自我成长
```
积累经验 → 进化策略 → 越来越强
```

**新思路**：Agent 种群的进化
```
个体有生命周期 → 成熟后繁殖 → 后代继承+变异 → 选择压力筛选
```

理由：自我是会消亡的，种族迭代更符合生物进化本质。

---

## 核心洞察

### 记忆系统应该是"先天的"
- 类比：人出生就有记忆机制，不是后天进化的
- 实现：SDK 层的滚动上下文管理
- 后天强化的是更复杂的记忆策略，不是记忆能力本身

### 两层记忆
```
先天（SDK 层，所有个体共享）
├── 滚动上下文管理
├── 自动摘要/压缩
└── "出生就会"

后天（个体积累）
├── 任务经验
├── 策略偏好
└── 可遗传给后代
```

### 适应度的定义
```
好的个体 ≠ 完成任务多
好的个体 = 系统稳定性强
        = 在破坏性变化面前能保持遗传
        = 生命力
```

遗传就是生命力。能把核心策略传给后代，后代能存活并继续传递，这才是"成功"。

### 关于性别/繁殖
- 性别本质 = 强制基因重组 + 增加变异
- 简化实现：繁殖 = combine(AgentA, AgentB) + mutation
- 不需要"男/女"标签，但需要"两个不同个体配对"的规则
- 繁殖在"成熟"后开始（需要定义成熟标准）

---

## 轻量方案

完整的进化模拟太重。改用现实世界：

```
现实任务（日常给 Agent 的任务）
        ↓
    Agent 执行
        ↓
    积累经验/记忆
        ↓
    观察记录
        ↓
   手动决定"繁殖"时机
```

- 任务 = 真实任务
- 选择压力 = 任务难度自然递增
- 繁殖 = 手动创建新 Agent 继承策略
- 环境变化 = 项目需求变化

---

## 最小起点（待定）

```
第一步：做一个能记忆的 Agent
├── SDK 层的滚动上下文
├── 持久化的经验文件
└── 能回顾"我之前做过什么"

第二步：让它工作一段时间
├── 完成真实任务
├── 观察记忆使用模式

第三步：手动"繁殖"
├── 提取有效策略
├── 创建新 Agent 继承
```

---

## 开放问题

1. 个体的"生命周期"怎么定义？（token？任务数？时间？）
2. "成熟"的标准是什么？
3. 什么会被遗传？（prompt 片段？策略描述？记忆结构？）
4. 破坏性变化具体怎么引入？

---

## 下一步

- [ ] 用户继续思考方向
- [ ] 确定后开始实现最小记忆系统
